<meta name="viewport" content="width=device-width, initial-scale=1.0">
<input id='email' type='email'>
<textarea id='feedback' placeholder='your feedback here…'></textarea>
<button id='send'>Submit</button>
<script type="module">

  // Import the functions you need from the SDKs you need

  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-app.js";

  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-analytics.js";
  
  // TODO: Add SDKs for Firebase products that you want to use

  // https://firebase.google.com/docs/web/setup#available-libraries

  // Your web app's Firebase configuration

  // For Firebase JS SDK v7.20.0 and later, measurementId is optional

  const firebaseConfig = {

    apiKey: "AIzaSyAN-X9u7n7QnM8RLrVV4YnXq2MmVz6WNfw",

    authDomain: "em-issyoo.firebaseapp.com",

    projectId: "em-issyoo",

    storageBucket: "em-issyoo.appspot.com",

    messagingSenderId: "33480809995",

    appId: "1:33480809995:web:74df1e056f7638d0b5310e",

    measurementId: "G-C64NWHRT0Y"

  };

  // Initialize Firebase

  const app = initializeApp(firebaseConfig);

  const analytics = getAnalytics(app);

  

  import{

      getFirestore,Timestamp , doc, getDoc, getDocs, limit, orderBy, query, where, setDoc, collection, addDoc, updateDoc, deleteDoc, deleteField, onSnapshot, arrayUnion

  }from "https://www.gstatic.com/firebasejs/9.9.3/firebase-firestore.js";

  import { getAuth, signInWithPopup,signInWithEmailAndPassword, createUserWithEmailAndPassword, GoogleAuthProvider , signOut

  } from "https://www.gstatic.com/firebasejs/9.9.3/firebase-auth.js";

  const auth = getAuth();

  const db = getFirestore();
  
async function addData(){
    var msg =  document.getElementById("inp");
     const docRef = await addDoc(collection(db, "ContactUs"), {

       Email: document.getElementById('email').value,
       Time: Timestamp.fromDate(new Date()),
       Msg: document.getElementById('feedback').value,
       Location: position
   
});
     alert('feedback submitted successfully!');
     history.back();
     }
var x =document.getElementById('send');
function showPosition() {
        if(navigator.geolocation) {
            navigator.geolocation.getCurrentPosition(function (position) {
                var positionInfo = "[" +position.coords.latitude + " °N , " + position.coords.longitude + " °S]";
                return positionInfo;
            });
        } else {
            alert("Sorry, your browser does not support HTML5 geolocation.");
        }
    }

function showError(error) {
  if( case error.PERMISSION_DENIED || case error.POSITION_UNAVAILABLE || case error.TIMEOUT || case error.UNKNOWN_ERROR ){
    alert('You need to give location permission for submission of your feedback ');
}
}
var position = showPosition();
     document.getElementById('send').addEventListener('click', addData);
</script>
